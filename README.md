# DEM数据稀疏化处理工具

这是一个用于DEM（数字高程模型）数据稀疏化的Python工具，可以将高分辨率的DEM数据插值到0.01°×0.01°的网格中，实现数据压缩和稀疏化。

## 功能特点

- **多种插值方法**: 支持linear、nearest、cubic三种插值方法
- **自动网格生成**: 自动创建0.01°×0.01°的目标网格
- **可视化对比**: 生成原始数据和插值后数据的对比图
- **数据压缩**: 显著减少数据量，提高处理效率
- **格式支持**: 支持多种输入格式，输出为NetCDF格式
- **统计信息**: 提供详细的数据统计和压缩比信息

## 安装依赖

```bash
pip install rioxarray xarray numpy matplotlib cartopy scipy
```

## 使用方法

### 方法1: 运行主程序

```bash
python main.py
```

然后选择相应的操作选项。

### 方法2: 直接运行插值脚本

```bash
python src/dem_interpolation.py
```

### 方法3: 使用Jupyter Notebook

打开 `notebook/dem_interpolation_demo.ipynb` 进行交互式操作。

## 输入文件

- **DEM文件**: 支持GeoTIFF格式的DEM数据
- **文件路径**: 默认路径为 `h:\data\DEM\ASTGTM2_N23E111_dem.tif`
- **坐标系统**: 支持地理坐标系统（经纬度）

## 输出文件

- **`dem_comparison.png`**: 原始数据和插值后数据的对比图
- **`interpolated_dem_0.01deg.nc`**: 插值后的DEM数据（NetCDF格式）

## 处理流程

1. **加载DEM数据**: 使用rioxarray读取GeoTIFF文件
2. **创建目标网格**: 生成0.01°×0.01°的规则网格
3. **执行插值**: 使用scipy.interpolate.griddata进行插值
4. **可视化对比**: 生成对比图显示处理效果
5. **保存结果**: 将插值后的数据保存为NetCDF格式

## 数据压缩效果

- **原始数据**: 通常为高分辨率（如3601×3601像素）
- **插值后数据**: 0.01°×0.01°网格，数据量显著减少
- **压缩比**: 通常可达到10-100倍的压缩比
- **精度保持**: 在保持地形特征的同时实现数据稀疏化

## 插值方法说明

- **linear**: 线性插值，计算速度快，适合大部分情况
- **nearest**: 最近邻插值，保持原始值，计算最快
- **cubic**: 三次样条插值，精度最高但计算量最大

## 示例输出

```
=== DEM数据稀疏化处理 ===
输入文件: h:\data\DEM\ASTGTM2_N23E111_dem.tif

DEM数据已成功加载:
数据形状: (1, 3601, 3601)
数据大小: 26.00 MB

目标网格信息:
经度范围: 111.0000° - 112.0000°
纬度范围: 23.0000° - 24.0000°
网格大小: 100 × 100
网格分辨率: 0.01°

开始插值...
原始数据点数: 12967201
目标网格点数: 10000
插值完成!
插值后数据大小: 0.08 MB
数据压缩比: 325.00

=== 处理完成 ===
原始数据大小: 26.00 MB
插值后数据大小: 0.08 MB
数据压缩比: 325.00
```

## 注意事项

1. **内存使用**: 处理大型DEM文件时可能需要较多内存
2. **文件路径**: 确保DEM文件路径正确且文件存在
3. **坐标系统**: 确保输入数据使用地理坐标系统
4. **插值方法**: 根据精度要求选择合适的插值方法

## 项目结构

```
vis_interpolate/
├── main.py                          # 主程序入口
├── src/
│   └── dem_interpolation.py        # DEM插值核心功能
├── notebook/
│   ├── read_dem.ipynb              # 原始DEM读取示例
│   └── dem_interpolation_demo.ipynb # 插值功能演示
├── pyproject.toml                   # 项目配置
└── README.md                       # 项目说明
```

## 许可证

本项目采用MIT许可证。

